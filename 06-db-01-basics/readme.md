## Задача 1

_Архитектор ПО решил проконсультироваться у вас, какой тип БД 
лучше выбрать для хранения определенных данных._

_Он вам предоставил следующие типы сущностей, которые нужно будет хранить в БД:_

- _Электронные чеки в json виде_
- _Склады и автомобильные дороги для логистической компании_
- _Генеалогические деревья_
- _Кэш идентификаторов клиентов с ограниченным временем жизни для движка аутенфикации_
- _Отношения клиент-покупка для интернет-магазина_

_Выберите подходящие типы СУБД для каждой сущности и объясните свой выбор._

**Электронные чеки в json виде** —  рациональнее всего хранить в NoSQL документоориентированной БД, поскольку нам нужно хранить не просто "ключ-значение", а множество таких значений для одного документа, и большое количество таких документов. В лекции мы рассматривали MongoDB, но сложно говорить о конкретных БД, поскольку я с ними никогда не работал и пока плохо их понимаю.

**Склады и автомобильные дороги для логистической компании** — скорее всего, в этом случае лучше всего использовать графовую БД, поскольку любая логистика — это, по сути, решение задачи на графе, где его вершины — это склады, а ребра — пути между этими вершинами (автомобильные дороги). У дорог может быть несколько значений, важных для выбора оптимального пути (протяженность, платность/бесплатность и стоимость проезда).

**Генеалогические деревья** — здесь бы я использовал сетевую СУБД, поскольку генеалогическое дерево — структура иерархическая, но у каждого человека, чаще всего, будет два родителя. Классическая иерархическая СУБД допускает у каждого потомка только одного родителя, что нам не подходит. Поэтому нам нужна сетевая СУБД, являющаяся так же иерархической, но допускающая у потомка более одного родителя. 

**Кэш идентификаторов клиентов с ограниченным временем жизни для движка аутенфикации** — здесь нужна БД типа "ключ-значение", где ключ — ID клиента, значение — его временный идентификатор для аутентификации. Плюс, конечно, эта СУБД должна поддерживать функционал TTL. Если выбирать из рассмотренных в лекции СУБД, это может быть Redis или Memcached, говорить более конкретно на данном этапе мне сложно.

**Отношения клиент-покупка для интернет-магазина** — скорее всего, здесь лучше всего подойдет самая классическая, если ее так можно назвать, табличная реляционную SQL СУБД. Мы можем отдельно хранить таблицу с продуктами, отдельно — БД клиентов, отдельно — список заказов, записи в котором будут ссылаться на клиентов и продукты.


## Задача 2

_Вы создали распределенное высоконагруженное приложение и хотите классифицировать его согласно 
CAP-теореме. Какой классификации по CAP-теореме соответствует ваша система, если 
(каждый пункт - это отдельная реализация вашей системы и для каждого пункта надо привести классификацию):_

- _Данные записываются на все узлы с задержкой до часа (асинхронная запись)_

Скорее всего, это PA-система, поскольку во время этой задержки данные на разных узлах будут отличаться.

Согласно PACELC-теореме, я бы классифицировал эту реализацию как PA/EL, поскольку мы базово не можем гарантировать high consistency из-за задержки в обновлении данных на узлах, но можем обеспечить, я полагаю, низкое время ответа от узлов при нормальных условиях работы системы в отсутствие разделения. 

- _При сетевых сбоях, система может разделиться на 2 раздельных кластера_

Это CA-система, поскольку при разделении на два отдельных (судя по всему, имеются в виду изолированных?) кластера, отклик от разных кластеров (по содержанию) будет разным.

Согласно PACELC-теореме, я бы классифицировал эту реализацию как PA/EC, поскольку при разделении системы на два кластера мы вряд ли сможем обеспечить consistency (по крайней мере, если предполагаем, что по CAP у нас CA-система), а при нормальных условиях функционирования сделаем ставку как раз на согласованность, чтобы минимизировать разницу между кластерами в момент сетевого разделения.

- _Система может не прислать корректный ответ или сбросить соединение_

Это CP-система, поскольку не гарантирована ее доступность.

Согласно PACELC-теореме, я бы классифицировал эту реализацию как PC/EC, поскольку доступность системы мы не можем обеспечить даже в нормальных условиях (полагая, что это CP-система). Если мы не можем обеспечить ее доступность, по крайней мере мы можем обеспечить согласованность. 

_А согласно PACELC-теореме, как бы вы классифицировали данные реализации?_

## Задача 3

_Могут ли в одной системе сочетаться принципы BASE и ACID? Почему?_

Чисто идейно не могут, поскольку BASE противопоставляет себя ACID, как это было сказано в лекции.

Однако меня немного настораживает/смущает, что на слайде 32 для NoSQL-БД в числе характеристик указано, что: "BASE - **Слабые** ACID свойства, уклон в сторону BASE для производительности". Не указано, что этих свойств нет вообще, указано, что они слабые. Так что я бы предположил, что невозможна одновременная реализация и BASE, и ACID, потому что это идейно противоположные модели работы, но можно реализовать некоторый набор ACID-свойств в BASE-системе (но вряд ли наоборот — это просто бы не имело смысла).

## Задача 4

_Вам дали задачу написать системное решение, основой которого бы послужили:_

- _фиксация некоторых значений с временем жизни_
- _реакция на истечение таймаута_

_Вы слышали о key-value хранилище, которое имеет механизм [Pub/Sub](https://habr.com/ru/post/278237/). 
Что это за система? Какие минусы выбора данной системы?_

Это СУБД Redis.

Минусы её использования.
* Redis изначально не Pub/Sub система, а просто key-value база данных, которая может реализовать Pub/Sub механизм.
* Redis хранит весь датасет в памяти, то ест размер датасета ограничен размером памяти. Чтобы сгружать часть информации на диск необходимо задействовать более сложные по сравнению с нативными решениями механизмы снэпшотов или журналирования. Redis подойдет, в таком случае, только для недолгого хранения сообщений в системах, где не нужно долго хранить информацию (например, для real-time коммуникации).   